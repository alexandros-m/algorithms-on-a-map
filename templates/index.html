<!DOCTYPE html>
<html>
<head>
    <title>Algorithms on a map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/aaaakshat/cm-web-fonts@latest/fonts.css">
    <link rel="stylesheet" href="./static/css/style.css">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
</head>
<body>
    <div id="map"></div>
    <div id="controls">
        <h2>Algorithms on a map</h2>
        <p id='subtitle'>Educational framework for testing graph algorithms on an interactive real world map</p>
        
        <hr>

        <h4>Create Graph on Map</h4>
<!--         <div style="display: inline-flex; align-items: center; gap: 1rem;">
            <p style="margin: 0;">Center selection:</p>
            
            <div style="display: inline-flex;">
                <button onclick="enableCenterSelection()">ON</button>
                <button onclick="disableCenterSelection()">OFF</button>
            </div>
            <span id="centerStatus"></span>
        </div><br> -->

        <p>Center Selection: <span id="centerStatus"></span></p>

        <label for="graph-types">Graph type:</label>
        <select name="graph-types" id="graphType">
            <option value="drive">Drive</option>
            <option value="walk">Walk</option>
            <option value="bike">Bike</option>
        </select> <br>

        <label for="radius">Radius (meters): <span id="radiusLabel">500</span>m</label><br>
        <input type="range" id="radius" min="500" max="5000" value="500" step="100" style="width: 100%;"><br>
        
        <button onclick="generateGraph()">Generate Graph</button>
        <button onclick="clearMapFromGraph()">Clear Map</button>
        
        <hr>

        <h4>Pick Nodes</h4>

        <label for="startNode">Start Node:</label>
        <input type="text" id="startNode" placeholder="e.g. 123456" /><br>

        <label for="endNode">End Node:</label>
        <input type="text" id="endNode" placeholder="e.g. 654321" />

        <hr>

        <h4>DFS</h4>
        <p>Deep recursive graph traversal - stack-based depth-first exploration</p>
        <button onclick="runDFS()">Run DFS</button>

        <h4>BFS</h4>
        <p>Level-by-level graph exploration - queue-driven breadth-first traversal</p>
        <button onclick="runBFS()">Run BFS</button>

        <h4>Dijkstra</h4>
        <p>Shortest paths from source to all vertices - greedy priority-based exploration</p>
        <button onclick="runDijkstra()">Run Dijkstra</button>
        
        <h4>Bellman-Ford</h4>
        <p>Shortest paths with negative edge detection - relaxation through multiple iterations</p>
        <button onclick="runBellmanFord()">Run Bellman-Ford</button>

        <h4>A*</h4>
        <p>Heuristic-guided pathfinding for goal-directed search</p>
        <button onclick="runAStar()">Run A*</button>

        <h4>Bidirectional Dijkstra</h4>
        <p>Meet-in-the-middle pathfinding optimization - dual-ended exploration strategy</p>
        <button onclick="runBidirectionalDijkstra()">Run Bidirectional Dijkstra</button>

        <h4>Max Flow (Edmonds-Karp)</h4>
        <p>Network capacity analysis for traffic planning - congestion modeling tool. <br><i>The capacity of each edge is calculated roughly using its length.</i></p>
        <button onclick="runMaxFlow()">Run Max Flow</button>
        
        <hr>
        
        <h4>Algorithm Controls</h4>
        
        <label>
            Delay:
            <input type="range" id="speedSlider" min="0" max="1000" value="0" step="10" oninput="updateSpeedLabel(this.value)">
            <span id="speedLabel">0ms</span>
        </label>


        <div id="stats">
            <h4>Statistics</h4>
            <p>Algorithm: <span id="algoName">-</span><br>
            Iterations: <span id="iterations">0</span><br>
            Time: <span id="timeTaken">0</span> ms </p>
        </div>

        <h4>Log</h4>
        <div id="log"></div>

        <button onclick="resetMapWithoutRemovingGraph()">Reset Log and Stats</button>
        
        <hr>

        <footer>
            <p> <span class="copyleft">&copy;</span> nakedcode.neocities.org, 2025<br>
                Shared under the GPL3 license
            </p>
        </footer>
    </div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-polylinedecorator@1.6.0/dist/leaflet.polylineDecorator.min.js"></script>
    <script src='./static/js/global_functions.js'></script>
    <script src='./static/js/algorithms.js'></script>
    <script src='./static/js/render_map.js'></script>
</body>
</html>